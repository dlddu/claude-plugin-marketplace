# Agile Workflow Plugin

애자일 방법론, 명세 주도 개발(SDD), 테스트 주도 개발(TDD)을 통합한 Claude Code 플러그인입니다.

## 개요

이 플러그인은 소프트웨어 개발의 전체 라이프사이클을 체계적으로 관리합니다:

```
요구사항 → 명세 → 설계 → 계획 → 구현 → 테스트 → 완료
```

모든 단계는 **양방향 추적성 매트릭스**로 연결되어, 요구사항부터 구현까지 완벽한 추적이 가능합니다.

## 설치

```bash
# 마켓플레이스 추가
/plugin marketplace add dlddu/claude-plugin-marketplace

# 플러그인 설치
/plugin install agile-workflow@dlddu-plugins
```

## 작동 원리

### 전체 워크플로우

```
┌─────────────────────────────────────────────────────────────────────┐
│                        Agile Workflow                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐         │
│   │   명세 작성   │ →  │ 프로젝트     │ →  │  작업 계획   │         │
│   │  Spec Writing │    │ Bootstrap   │    │Task Planning │         │
│   └──────────────┘    └──────────────┘    └──────────────┘         │
│          │                   │                   │                  │
│          │                   │                   ↓                  │
│          │                   │            ┌──────────────┐         │
│          │                   │            │    구현      │ ←──┐    │
│          │                   │            │Implementation│    │    │
│          │                   │            └──────────────┘    │    │
│          │                   │                   │            │    │
│          │                   │                   ↓            │    │
│          │                   │            ┌──────────────┐    │    │
│          │                   │            │  CI 테스트   │    │    │
│          │                   │            │GitHub Actions│    │    │
│          │                   │            └──────────────┘    │    │
│          │                   │                   │            │    │
│          │                   │          ┌────────┴────────┐   │    │
│          │                   │          ↓                 ↓   │    │
│          │                   │       통과 ✅           실패 ❌ ─┘    │
│          │                   │          │                          │
│          ↓                   ↓          ↓                          │
│   ┌────────────────────────────────────────────┐                   │
│   │           추적성 매트릭스 (Traceability)     │                   │
│   │  REQ ↔ SPEC ↔ US ↔ AT ↔ TASK ↔ TC          │                   │
│   └────────────────────────────────────────────┘                   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

## 스킬 상세

### 1. 명세 작성 스킬 (Spec Writing)

**목적**: 요구사항을 체계적인 문서로 정리

**트리거**: "명세 작성해줘", "요구사항 정리해줘", "스펙 문서 만들어줘"

**수행 작업**:
1. 사용자 요구사항 수집 및 분석
2. 기능 명세서 작성 (`docs/specs/SPEC-{번호}.md`)
3. 사용자 스토리 작성 (`docs/user-stories/US-{번호}.md`)
4. 인수 테스트 정의 (사용자 스토리 내 포함)
5. 추적성 매트릭스 업데이트

**핵심 원칙**:
- 사용자 스토리의 "사용자"는 항상 **최종 사용자**
- 모든 인수 조건(AC)에는 대응하는 인수 테스트(AT) 필수

```
사용자 스토리 형식:
As a [최종 사용자]
I want [원하는 기능]
So that [얻고자 하는 가치]

인수 테스트 형식:
Given [사전 조건]
When [실행 조건]
Then [기대 결과]
```

### 2. 프로젝트 부트스트랩 스킬 (Project Bootstrap)

**목적**: 신규 프로젝트의 기반 구조 설정

**트리거**: "프로젝트 초기화해줘", "CI 설정해줘", "프로젝트 구조 만들어줘"

**수행 작업**:
1. 명세서 기반 기술 스택 결정
2. 아키텍처 설계 문서 작성 (`docs/architecture/ARCHITECTURE.md`)
3. GitHub Actions CI 파이프라인 설정 (`.github/workflows/ci.yml`)
4. Hello World + Health Check 엔드포인트 구현
5. 기본 테스트 작성
6. CI 통과 확인

**검증 기준**:
- 로컬 빌드 성공
- 로컬 테스트 통과
- Health Check 응답 확인
- GitHub Actions 모든 Job 성공

```yaml
# 생성되는 CI 파이프라인 구조
Jobs:
  build-and-test:    # 빌드 및 단위 테스트
  integration-test:  # 통합 테스트
  e2e-test:          # E2E 테스트 (PR 시)
```

### 3. 작업 계획 스킬 (Task Planning)

**목적**: 다음에 수행할 작업 선정 및 계획

**트리거**: "다음 작업 뭐야", "할 일 정리해줘", "남은 작업 확인"

**수행 작업**:
1. 문서 목록 확인 (명세서, 사용자 스토리, 추적성 매트릭스)
2. 인수 테스트 기반 진행 상황 분석
3. 남은 작업 식별
4. 적절한 크기로 작업 분할
5. 다음 작업 선정
6. 작업 계획서 작성 (`docs/tasks/TASK-{번호}.md`)

**작업 판단 기준**:
- 작업 완료 = 인수 테스트 통과
- 작업 크기는 테스트 작성 시간 포함하여 산정
- Large 크기 작업은 반드시 분할

```
작업 크기 기준:
Small (S):  1-2시간 - 단일 함수, 테스트 1-2개
Medium (M): 2-4시간 - 기능 모듈, 테스트 3-5개
Large (L):  4시간+ → 반드시 분할
```

**작업 선정 우선순위**:
1. 테스트 실패 중인 항목 (수정 필요)
2. 의존성이 없는 항목
3. 다른 작업의 선행 조건인 항목
4. 우선순위가 높은 사용자 스토리의 인수 테스트

### 4. 구현 스킬 (Implementation)

**목적**: TDD 방식으로 실제 코드 구현

**트리거**: "구현 시작해줘", "개발 진행해줘", "코드 작성해줘"

**TDD 사이클**:

```
┌─────────┐    ┌─────────┐    ┌─────────────┐
│  RED    │ →  │  GREEN  │ →  │  REFACTOR   │
│테스트작성│    │구현작성 │    │ 코드개선    │
│ (실패)  │    │ (통과)  │    │ (유지)     │
└─────────┘    └─────────┘    └─────────────┘
```

**핵심 원칙**:

1. **테스트와 구현 동시 작성**
   - 절대로 테스트 없이 구현만 작성하지 않음

2. **테스트 실패 시 처리**
   ```
   테스트 실패
        │
        ├─ 명세에 논리적 오류 있음 → 명세 수정 검토 (사용자 확인)
        │
        └─ 명세에 오류 없음 → 구현 코드 수정 (테스트는 유지)
   ```

3. **CI 기반 검증**
   - 로컬 테스트가 아닌 **GitHub Actions 결과**로 최종 판단
   - CI 통과할 때까지 수정-커밋-푸시-확인 반복

**구현 완료 조건**:
- 구현 코드 작성 완료
- 단위 테스트 작성 및 통과
- 통합 테스트 작성 및 통과
- GitHub Actions CI 통과
- 인수 테스트 통과
- 추적성 매트릭스 업데이트

## 커맨드

### /generate-claude-md

프로젝트에 애자일 워크플로우를 적용하기 위한 `CLAUDE.md` 파일을 생성합니다.

**생성되는 항목**:
- `CLAUDE.md` - 워크플로우 가이드
- `docs/specs/` - 명세서 디렉토리
- `docs/user-stories/` - 사용자 스토리 디렉토리
- `docs/architecture/` - 아키텍처 문서 디렉토리
- `docs/tasks/` - 작업 계획서 디렉토리
- `docs/traceability-matrix.md` - 추적성 매트릭스

## 추적성 매트릭스

모든 산출물은 양방향으로 추적 가능합니다:

```
순방향: REQ → SPEC → US → AT → TASK → TC → 코드
역방향: 코드 → TC → TASK → AT → US → SPEC → REQ
```

**매트릭스 예시**:

| REQ ID | SPEC ID | US ID | AT ID | TASK ID | 구현 상태 | CI 상태 |
|--------|---------|-------|-------|---------|---------|--------|
| REQ-001 | SPEC-001 | US-001 | AT-001.1 | TASK-001 | ✅ | ✅ |
| REQ-001 | SPEC-001 | US-001 | AT-001.2 | TASK-002 | 🔄 | 🔄 |
| REQ-002 | SPEC-002 | US-002 | AT-002.1 | - | ⬜ | - |

## 문서 구조

```
project/
├── docs/
│   ├── specs/                     # 기능 명세서
│   │   └── SPEC-001-feature.md
│   ├── user-stories/              # 사용자 스토리 + 인수 테스트
│   │   └── US-001-feature.md
│   ├── architecture/              # 아키텍처 문서
│   │   └── ARCHITECTURE.md
│   ├── tasks/                     # 작업 계획서
│   │   └── TASK-001-task.md
│   └── traceability-matrix.md     # 추적성 매트릭스
├── .github/
│   └── workflows/
│       └── ci.yml                 # CI 파이프라인
└── CLAUDE.md                      # 워크플로우 가이드
```

## 사용 예시

### 새 프로젝트 시작

```
사용자: "/generate-claude-md"
→ CLAUDE.md 및 문서 구조 생성

사용자: "로그인 기능에 대한 명세를 작성해줘"
→ SPEC-001, US-001 생성, 인수 테스트 정의

사용자: "프로젝트 초기화해줘"
→ 아키텍처 설계, CI 설정, Hello World 구현

사용자: "다음 작업 뭐야?"
→ 진행 상황 분석, TASK-001 생성

사용자: "구현 시작해줘"
→ TDD 방식으로 구현, CI 통과까지 반복
```

### 기존 프로젝트 계속

```
사용자: "다음 작업 뭐야?"
→ 추적성 매트릭스 분석
→ 미완료 인수 테스트 확인
→ 다음 작업 계획서 생성

사용자: "구현 시작해줘"
→ 작업 계획서 기반 TDD 구현
→ GitHub Actions 통과 확인
→ 추적성 매트릭스 업데이트
```

## 핵심 가치

1. **추적성**: 모든 요구사항은 구현까지 추적 가능
2. **품질**: TDD와 CI를 통한 품질 보장
3. **명확성**: 인수 테스트 기반의 명확한 완료 기준
4. **점진적 개발**: 작은 단위로 분할하여 점진적 구현
5. **자동화**: GitHub Actions를 통한 자동 검증

## 라이선스

MIT License
