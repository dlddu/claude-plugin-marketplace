---
name: task-planning
description: >
  명세서와 사용자 스토리를 분석하여 다음 작업을 계획합니다.
  "다음 작업 뭐야", "작업 계획 세워줘", "할 일 정리해줘", "다음에 뭐 해야 해" 등을 요청할 때 활성화됩니다.
---

# 작업 계획 스킬 (Task Planning Skill)

## 개요

이 스킬은 명세서, 사용자 스토리, 추적성 매트릭스를 분석하여 남은 작업을 파악하고, 다음에 진행할 작업을 선정하여 작업 계획서를 작성합니다.
모든 작업 분할과 선정은 **인수 테스트(Acceptance Test)**를 기준으로 합니다.

## 실행 조건

다음과 같은 요청 시 이 스킬이 활성화됩니다:
- "다음 작업 뭐야"
- "작업 계획 세워줘"
- "할 일 정리해줘"
- "다음에 뭐 해야 해"
- "남은 작업 확인"
- "진행 상황 확인"

## 작업 흐름

### Phase 1: 문서 분석 및 진행 상황 파악

1. **문서 목록 확인**
   ```
   분석 대상 문서:
   - docs/specs/*.md           # 명세서
   - docs/user-stories/*.md    # 사용자 스토리 (인수 테스트 포함)
   - docs/traceability-matrix.md  # 추적성 매트릭스
   - docs/tasks/*.md           # 기존 작업 계획서
   ```

2. **인수 테스트 기반 진행 상황 분석**
   ```
   각 사용자 스토리(US)의 인수 테스트(AT) 상태 확인:
   - 구현 완료 + 테스트 통과: ✅ 완료
   - 구현 완료 + 테스트 실패: ⚠️ 수정 필요
   - 구현 미완료: ❌ 미착수
   ```

3. **추적성 매트릭스 상태 확인**
   ```markdown
   | US ID | AT ID | 구현 상태 | 테스트 상태 | 전체 상태 |
   |-------|-------|---------|-----------|---------|
   | US-001 | AT-001.1 | ✅ | ✅ | 완료 |
   | US-001 | AT-001.2 | ✅ | ❌ | 수정 필요 |
   | US-002 | AT-002.1 | ❌ | - | 미착수 |
   ```

### Phase 2: 남은 작업 판단

**판단 기준**: 인수 테스트 통과 여부

```
IF 모든 인수 테스트가 통과:
    → "모든 작업이 완료되었습니다" 안내
    → 스킬 종료

ELSE:
    → 미완료된 인수 테스트 목록 작성
    → Phase 3로 진행
```

### Phase 3: 작업 분할 및 다음 작업 선정

**작업 분할 원칙**:

1. **인수 테스트 단위로 분할**
   - 하나의 작업 = 하나 이상의 관련 인수 테스트 통과
   - 너무 큰 인수 테스트는 더 작은 단위로 분할

2. **작업 크기 판단 기준** (테스트 작성 시간 포함)
   ```
   Small (S): 1-2시간 예상
   - 단일 함수/메서드 구현
   - 간단한 테스트 1-2개

   Medium (M): 2-4시간 예상
   - 하나의 기능 모듈 구현
   - 테스트 3-5개

   Large (L): 4시간 초과 → 분할 필요
   - 분할하여 S 또는 M 크기로 변경
   ```

3. **다음 작업 선정 기준**
   ```
   우선순위 순서:
   1. 테스트 실패 중인 항목 (수정 필요)
   2. 의존성이 없는 항목
   3. 다른 작업의 선행 조건인 항목
   4. 우선순위가 높은 사용자 스토리의 인수 테스트
   ```

### Phase 4: 작업 계획서 작성

**파일 위치**: `docs/tasks/TASK-{번호}-{작업명}.md`

**작업 계획서 템플릿**:

```markdown
# TASK-{번호}: {작업명}

## 메타데이터
- **작성일**: {날짜}
- **예상 크기**: S | M
- **상태**: 계획됨 | 진행중 | 완료
- **관련 스토리**: US-{번호}
- **관련 인수 테스트**: AT-{번호}.x

## 작업 목표

이 작업을 완료하면 다음 인수 테스트가 통과합니다:
- [ ] AT-{번호}.1: {인수 테스트 설명}
- [ ] AT-{번호}.2: {인수 테스트 설명}

## 구현 범위

### 구현할 기능
1. {기능 1}
2. {기능 2}

### 작성할 테스트
1. {테스트 1} - AT-{번호}.1 검증
2. {테스트 2} - AT-{번호}.2 검증

### 구현 제외 항목
- {이 작업에서 구현하지 않는 항목}

## 기술적 접근 방법
1. {접근 방법 단계 1}
2. {접근 방법 단계 2}
3. {접근 방법 단계 3}

## 테스트 전략

### 단위 테스트
- {단위 테스트 대상}

### 통합 테스트
- {통합 테스트 대상}

### 인수 테스트 실행 방법
```bash
# 로컬 테스트 실행
{테스트 명령}
```

## 완료 조건

이 작업은 다음 조건을 모두 만족할 때 완료됩니다:
1. [ ] 구현 코드 작성 완료
2. [ ] 단위 테스트 작성 및 통과
3. [ ] 통합 테스트 작성 및 통과
4. [ ] GitHub Actions CI 통과
5. [ ] 인수 테스트 통과 (AT-{번호}.x)
6. [ ] 추적성 매트릭스 업데이트

## 의존성

### 선행 작업
- {완료되어야 하는 작업}

### 후행 작업
- {이 작업 완료 후 진행 가능한 작업}

## 추적성
- **명세서**: SPEC-{번호}
- **사용자 스토리**: US-{번호}
- **인수 테스트**: AT-{번호}.x
- **테스트 케이스**: TC-{번호}
```

### Phase 5: 추적성 매트릭스 업데이트

```markdown
## 작업 추적성 추가

| US ID | AT ID | TASK ID | 상태 |
|-------|-------|---------|------|
| US-{번호} | AT-{번호}.1 | TASK-{번호} | 계획됨 |
```

## 산출물

이 스킬 실행 후 다음이 생성됩니다:

1. **진행 상황 요약** (콘솔 출력)
   ```
   📊 프로젝트 진행 상황
   ━━━━━━━━━━━━━━━━━━━━━━━
   총 인수 테스트: 10개
   - 통과: 4개 (40%)
   - 실패: 1개 (10%)
   - 미착수: 5개 (50%)
   ```

2. **다음 작업 안내** (콘솔 출력)
   ```
   📋 다음 작업: TASK-003
   ━━━━━━━━━━━━━━━━━━━━━━━
   목표: AT-002.1, AT-002.2 통과
   예상 크기: M (2-4시간)
   ```

3. **작업 계획서** (파일)
   - `docs/tasks/TASK-{번호}-{작업명}.md`

4. **추적성 매트릭스 업데이트**
   - `docs/traceability-matrix.md`

## 작업 완료 판단

모든 작업이 완료된 경우:

```
🎉 모든 작업이 완료되었습니다!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 총 인수 테스트: 10개 모두 통과
✅ 모든 사용자 스토리 구현 완료
✅ 추적성 매트릭스 100% 완성

다음 단계:
- 코드 리뷰 진행
- 배포 준비
```

## 주의사항

1. **인수 테스트 기준**: 작업 완료 여부는 반드시 인수 테스트 통과 여부로 판단합니다.

2. **테스트 시간 포함**: 작업 크기를 산정할 때 테스트 작성 시간을 반드시 포함합니다.

3. **Large 작업 금지**: L 크기의 작업은 반드시 분할합니다.

4. **단일 작업 집중**: 한 번에 하나의 작업만 진행합니다.

## 다음 단계

작업 계획이 완료되면:
- `implementation` 스킬로 구현 진행
