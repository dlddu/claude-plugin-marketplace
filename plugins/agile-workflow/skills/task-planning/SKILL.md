---
name: task-planning
description: >
  문서를 분석하여 남은 작업을 파악하고 다음 작업을 계획합니다.
  인수 테스트 기반으로 작업을 분할하고, 테스트 작성을 포함하여 작업 크기를 판단합니다.
  "다음 작업 뭐야", "작업 계획 세워줘", "할 일 정리해줘" 등을 요청할 때 활성화됩니다.
---

# 작업 계획 스킬 (Task Planning Skill)

## 개요

이 스킬은 프로젝트 문서를 분석하여 다음을 수행합니다:
1. **남은 작업 식별** - 추적성 매트릭스 기반
2. **작업 분할** - 인수 테스트 기반
3. **다음 작업 선정** - 우선순위와 의존성 고려
4. **작업 계획서 작성** (PLAN-XXX.md)

## 핵심 원칙

### 1. 인수 테스트 기반 작업 분할
- 각 작업은 하나 이상의 인수 테스트(AC)와 매핑되어야 함
- 작업 완료 = 해당 인수 테스트 통과
- 테스트 불가능한 작업은 더 세분화 필요

### 2. 테스트 포함 작업 크기 판단
- 작업 크기 = 구현 시간 + 테스트 작성 시간
- 이상적인 작업 크기: 1-4시간 (테스트 포함)
- 4시간 초과 시 분할 필요

### 3. 우선순위 결정 기준
1. Must have 요구사항 우선
2. 다른 작업의 의존성이 되는 작업 우선
3. 리스크가 높은 작업 우선 (빠른 피드백)

## 워크플로우

### Phase 1: 문서 분석 및 현황 파악

다음 문서들을 분석합니다:

```
docs/
├── SPEC.md                    # 요구사항 명세
├── USER-STORIES.md            # 사용자 스토리 & 인수 기준
├── ARCHITECTURE.md            # 아키텍처 설계
├── TRACEABILITY-MATRIX.md     # 추적성 매트릭스
└── plans/
    └── PLAN-XXX.md            # 기존 작업 계획서들
```

#### 분석 체크리스트
- [ ] 전체 요구사항 수 파악
- [ ] 구현 완료된 요구사항 식별
- [ ] 테스트 통과된 인수 기준 식별
- [ ] 미완료 사용자 스토리 목록 작성

### Phase 2: 남은 작업 식별

추적성 매트릭스에서 미완료 항목 추출:

```markdown
## 미완료 작업 목록

### 우선순위: Must Have
| 요구사항 | 사용자 스토리 | 인수 테스트 | 상태 |
|----------|--------------|------------|------|
| REQ-001 | US-001 | AC-001-1 | 미구현 |
| REQ-001 | US-001 | AC-001-2 | 미구현 |

### 우선순위: Should Have
...

### 우선순위: Could Have
...
```

### Phase 3: 작업 분할

인수 테스트를 기준으로 작업을 분할합니다:

#### 분할 규칙

1. **1 AC = 1 작업** (기본 원칙)
   - 각 인수 테스트가 독립적인 작업이 됨

2. **복잡한 AC 분할**
   - Given 조건이 복잡한 경우: 설정 작업 분리
   - Then 결과가 많은 경우: 검증 단위로 분할

3. **관련 AC 그룹화**
   - 동일한 컴포넌트를 수정하는 AC들
   - 순차적 의존성이 있는 AC들

#### 작업 크기 추정

```
작업 크기 = 구현 시간 + 테스트 작성 시간 + 리뷰/디버깅 버퍼

S (Small)  : 1-2시간 | 단순 기능, 테스트 1-2개
M (Medium) : 2-4시간 | 중간 복잡도, 테스트 3-5개
L (Large)  : 4시간+  | 분할 필요
```

### Phase 4: 다음 작업 선정

다음 기준으로 우선순위 점수 계산:

```
점수 = (Must=3, Should=2, Could=1)
     + (의존성 없음=2, 의존성 있음=0)
     + (리스크 높음=1, 리스크 낮음=0)
```

가장 높은 점수의 작업을 다음 작업으로 선정합니다.

### Phase 5: 작업 계획서 작성

`docs/plans/PLAN-XXX.md` 파일 생성:

```markdown
# 작업 계획서: PLAN-001

## 작업 정보
- **작업 ID**: TASK-001
- **작업명**: [작업 제목]
- **예상 크기**: S / M
- **관련 요구사항**: REQ-001
- **관련 사용자 스토리**: US-001
- **완료 조건**: AC-001-1, AC-001-2 통과

## 작업 배경
[이 작업이 왜 필요한지 설명]

## 구현 범위

### 포함 사항
- [ ] [구현할 기능 1]
- [ ] [구현할 기능 2]

### 제외 사항
- [이 작업에서 하지 않을 것]

## 테스트 계획

### 단위 테스트
- [ ] [테스트 케이스 1]
- [ ] [테스트 케이스 2]

### 통합 테스트
- [ ] AC-001-1: [시나리오 설명]
- [ ] AC-001-2: [시나리오 설명]

## 구현 가이드

### 수정 대상 파일
- `src/[파일경로]`: [변경 내용]

### 기술적 고려사항
- [고려해야 할 기술적 사항]

## 완료 기준
- [ ] 모든 단위 테스트 통과
- [ ] 모든 인수 테스트(AC) 통과
- [ ] CI 파이프라인 통과
- [ ] 코드 리뷰 완료 (해당 시)

## 의존성
- **선행 작업**: [없음 / TASK-XXX]
- **후행 작업**: [이 작업을 기다리는 작업들]
```

### Phase 6: 추적성 매트릭스 업데이트

새로운 작업 계획을 추적성 매트릭스에 반영:

| 요구사항 ID | 사용자 스토리 | 인수 테스트 | 작업 ID | 구현 상태 | 테스트 상태 |
|------------|--------------|------------|---------|----------|------------|
| REQ-001 | US-001 | AC-001-1 | TASK-001 | 계획됨 | - |

## 산출물 체크리스트

작업 완료 전 다음 항목을 확인하세요:

- [ ] 모든 문서 분석 완료
- [ ] 미완료 작업 목록 작성됨
- [ ] 작업이 인수 테스트 기반으로 분할됨
- [ ] 작업 크기가 테스트 포함하여 추정됨
- [ ] 다음 작업이 선정됨
- [ ] `docs/plans/PLAN-XXX.md` 작성됨
- [ ] 추적성 매트릭스 업데이트됨

## 사용 예시

```
사용자: 다음 작업 계획 세워줘

Claude:
[Phase 1] 문서 분석 중...
- SPEC.md: 10개 요구사항
- USER-STORIES.md: 15개 스토리, 42개 AC
- 완료: 5개 스토리, 15개 AC

[Phase 2] 남은 작업 식별...
- 미완료 스토리: 10개
- 미완료 AC: 27개

[Phase 3] 작업 분할...
- Must Have: 5개 작업
- Should Have: 3개 작업

[Phase 4] 다음 작업 선정...
선정된 작업: TASK-005 (US-003의 AC-003-1)
이유: Must Have, 의존성 없음, 핵심 기능

[Phase 5] 작업 계획서 작성...
docs/plans/PLAN-005.md 생성 완료

다음 작업이 준비되었습니다!
```

## 관련 스킬

- **spec-writing**: 명세 작성
- **project-bootstrap**: 프로젝트 초기화
- **implementation**: 계획 기반 구현 (후속)
